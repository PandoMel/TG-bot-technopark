## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ TG-bot-propusk

```
TG-bot-propusk/
‚îÇ
‚îú‚îÄ‚îÄ bot.py                    # ‚úÖ –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–ü–ï–†–ï–†–ê–ë–û–¢–ê–ù)
‚îú‚îÄ‚îÄ config.py                 # ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–æ–∫–µ–Ω—ã, –ø—É—Ç–∏, —Ç–µ–∫—Å—Ç—ã) (–ü–ï–†–ï–†–ê–ë–û–¢–ê–ù)
‚îú‚îÄ‚îÄ database.py               # ‚úÖ –†–∞–±–æ—Ç–∞ —Å bd.txt
‚îú‚îÄ‚îÄ services.py               # ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∞–Ω—Ç–∏–¥—É–±–ª–∏–∫–∞—Ç
‚îú‚îÄ‚îÄ logging_module.py         # ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–æ–≤ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ keyboards.py              # ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã Inline + Reply
‚îú‚îÄ‚îÄ FSMstates.py              # ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è aiogram 3.14
‚îú‚îÄ‚îÄ html_export.py            # ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è index.html (–∂—É—Ä–Ω–∞–ª –ø—Ä–æ–ø—É—Å–∫–æ–≤)
‚îÇ
‚îú‚îÄ‚îÄ routers/                  # ‚úÖ –†–æ—É—Ç–µ—Ä—ã aiogram 3.14
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ user.py               # ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–ª–æ—É: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ø—Ä–æ–ø—É—Å–∫
‚îÇ   ‚îú‚îÄ‚îÄ admin.py              # ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–ë–î, –ª–æ–≥–∏, –±–∞–Ω)
‚îÇ   ‚îî‚îÄ‚îÄ events.py             # ‚úÖ –°–æ–±—ã—Ç–∏—è (join/leave –≥—Ä—É–ø–ø—ã)
‚îÇ
‚îú‚îÄ‚îÄ bd.txt                    # –ë–∞–∑–∞: "0\n123;–û–û–û –†–æ–º–∞—à–∫–∞;+7916..."
‚îú‚îÄ‚îÄ index.html                # –ñ—É—Ä–Ω–∞–ª –ø—Ä–æ–ø—É—Å–∫–æ–≤ (–∫—Ä–∞—Å–∏–≤—ã–π HTML)
‚îú‚îÄ‚îÄ bot.log                   # –õ–æ–≥ –±–æ—Ç–∞ (15MB rotating)
‚îú‚îÄ‚îÄ KPP.log                   # –õ–æ–≥ –ø—Ä–æ–ø—É—Å–∫–æ–≤ (10MB rotating)
‚îÇ
‚îî‚îÄ‚îÄ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install aiogram==3.14.0
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python bot.py
```

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| **bot.py** | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Dispatcher, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥ |
| **config.py** | –¢–æ–∫–µ–Ω, ID –∞–¥–º–∏–Ω–æ–≤, ID –∫–∞–Ω–∞–ª–æ–≤, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –ø–æ–º–æ—â—å) |
| **database.py** | –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î: –ø–æ–∏—Å–∫, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª |
| **services.py** | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π |
| **logging_module.py** | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (bot.log, KPP.log) |
| **keyboards.py** | –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä (Inline + Reply) |
| **FSMstates.py** | –ö–ª–∞—Å—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (FSM) aiogram |
| **html_export.py** | –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ HTML —Ñ–∞–π–ª —Å –¥–∞—Ç–æ–π –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π |
| **routers/user.py** | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ /start, /help, /status, –∑–∞–∫–∞–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ |
| **routers/admin.py** | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –ø–æ–∏—Å–∫, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| **routers/events.py** | –°–æ–±—ã—Ç–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –∏–∑ –≥—Ä—É–ø–ø |

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

‚úÖ **–¢–æ–ª—å–∫–æ –∏–º–ø–æ—Ä—Ç—ã –∏ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –∏–∑–º–µ–Ω–µ–Ω—ã**
‚úÖ **–õ–æ–≥–∏–∫–∞ –∫–æ–¥–∞ –ù–ï –∏–∑–º–µ–Ω–µ–Ω–∞**
‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã**

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:
1. ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª –Ω–∞ –º–æ–¥—É–ª–∏ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
3. ‚úÖ –í—ã–Ω–µ—Å–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
4. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤
5. ‚úÖ –†–∞–±–æ—Ç–∞ —Å –ë–î –≤—ã–¥–µ–ª–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
6. ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è) –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
7. ‚úÖ HTML —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç–¥–µ–ª–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
8. ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ä–æ—É—Ç–µ—Ä—ã: user.py, admin.py, events.py
9. ‚úÖ bot.py –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤

## üöÄ –ó–∞–ø—É—Å–∫ —Å Python 3.13 –∏ aiogram 3.14.0

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è
python3 --version  # Python 3.13.x
pip show aiogram   # aiogram 3.14.0

# –ó–∞–ø—É—Å–∫
python3 bot.py
```

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `bd.txt` –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `ID;–ö–æ–º–ø–∞–Ω–∏—è;–¢–µ–ª–µ—Ñ–æ–Ω`
- –õ–æ–≥–∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (15MB –¥–ª—è bot.log, 10MB –¥–ª—è KPP.log)
- HTML –∂—É—Ä–Ω–∞–ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –ø—Ä–æ–ø—É—Å–∫–µ
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `config.py` –≤ —Å–ø–∏—Å–∫–µ `ADMINS`
